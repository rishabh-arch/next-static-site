(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[486],{6316:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/DeviceInfo",function(){return r(7602)}])},4307:function(e,t){"use strict";let r="192.168.0.200:5000";t.Z={createOrder:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(r,"/api/Signage/NativeTV/createOrder?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return 200!==n.status?n.json().then(e=>e):n.json().then(e=>e)},createOrderForOwnedDevices:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(r,"/api/Signage/NativeTV/createOrderForOwnedDevices?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return 200!==n.status?n.json().then(e=>e):n.json().then(e=>e)}}},7119:function(e,t,r){"use strict";r.d(t,{Y:function(){return a},e:function(){return s}});let n="192.168.0.200:5000",a=e=>{let{order:t,user:r,key:a}=e,s=localStorage.getItem("token"),o={key:a,amount:t.amount,currency:"INR",name:"Signage Verse",description:"Test Transaction",image:"https://rishabh-arch.github.io/website-assets/Signage/TV/icon.png",order_id:t.id,callback_url:"http://".concat(n,"/api/Signage/NativeTV/PaymentVerification?secret_token=")+s,prefill:{name:r.first_name,email:r.email,contact:r.contact},notes:{address:"Razorpay Corporate Office"},theme:{color:"#ffc107"}};new Razorpay(o).open()},s=e=>{let{order:t,user:r,key:a}=e,s=localStorage.getItem("token"),o={key:a,amount:t.amount,currency:"INR",name:"Signage Verse",description:"Test Transaction",image:"https://rishabh-arch.github.io/website-assets/Signage/TV/icon.png",order_id:t.id,callback_url:"http://".concat(n,"/api/Signage/NativeTV/PaymentVerificationForOwnedDevices?secret_token=")+s,prefill:{name:r.first_name,email:r.email,contact:r.contact},notes:{address:"Razorpay Corporate Office"},theme:{color:"#ffc107"}};new Razorpay(o).open()}},7602:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(5893),a=r(7294),s=r(3945);r(2787);var o=r(5766),i=r.n(o),c=r(1675),l=r(4307),h=r(7826),d=r(5147),u=r(5005),g=r(4492),m=r(2920),p=r(7119),f=r(5249),v=r.n(f);function x(){return(0,n.jsx)(h.ZP,{children:(0,n.jsx)(h.Vo.Consumer,{children:e=>(0,n.jsx)("div",{children:(0,n.jsx)(j,{})})})})}function j(){let e=(0,a.useContext)(h.Vo),{isAuthenticated:t,user:r}=e,[o,f]=(0,a.useState)({}),[x,j]=(0,a.useState)(!1),[y,b]=(0,a.useState)(""),[N,_]=(0,a.useState)([]),[S,k]=(0,a.useState)(0),[O,w]=(0,a.useState)(0),[T,C]=(0,a.useState)(0),[D,P]=(0,a.useState)(!1),[E,M]=(0,a.useState)(0);(0,a.useEffect)(()=>{c.Z.Get_Video_list({email:r.email}).then(e=>{e.msgError?console.log("error"):(f(e.data),w(e.price),j(!0))}).catch(e=>{console.log(e)})},[r]);let V=()=>{let e=[];if(""!==y)o.forEach(t=>{e.push({DeviceID:t.DeviceID,Month:y})});else{let t=N.filter(function(e){return""!=e.Month});e=t}""===e||e===[]||null==e||0===e.length?m.Am.error("Please Fill all the Details",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}):(console.log(e),l.Z.createOrderForOwnedDevices({paymentData:e}).then(e=>{e.msgError?(P(!1),m.Am.error(e.message.msgBody,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})):((0,p.e)(e.data),P(!1),m.Am.success("Successfully Added!",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}))}).catch(e=>{P(!1),m.Am.error("SomeThing Went Wrong!",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})}))};return(0,a.useEffect)(()=>{var e=N.filter(function(e){return""!=e.Month});if(e.forEach(e=>{"3"===e.Month?e.TotalPrice=e.Month*O.current*(1-O.discount.three):"6"===e.Month?e.TotalPrice=e.Month*O.current*(1-O.discount.six):"12"===e.Month?e.TotalPrice=e.Month*O.current*(1-O.discount.twelve):e.TotalPrice=e.Month*O.current}),e.length>0&&""==y){var t=0,r=0;e.forEach(e=>{t+=e.Month*O.current,r+=e.TotalPrice}),k(t),M(r)}else""!==y&&(k(o.length*y*O.current),"3"===y?M(o.length*(y*O.current-y*O.current*O.discount.three)):"6"===y?M(o.length*(y*O.current-y*O.current*O.discount.six)):"12"===y?M(o.length*(y*O.current-y*O.current*O.discount.twelve)):M(o.length*y*O.current));M(e=>Math.round(e)),k(e=>Math.round(e))},[y,N,o.length,T]),(0,n.jsxs)("main",{className:i().Dashboard_Container,children:[(0,n.jsx)("div",{className:v().Nav,children:(0,n.jsx)("div",{className:v().title,children:(0,n.jsxs)("h3",{children:["Extend ",(0,n.jsx)("span",{children:"Device"})," Date"]})})}),(0,n.jsx)("div",{className:i().grid,children:(0,n.jsxs)("div",{className:i().row_Full_Analytics,children:[(0,n.jsx)("div",{className:i().Analytics_Container,children:(0,n.jsx)("div",{className:i().analytic,children:(0,n.jsxs)(d.Z,{className:i().table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"#"}),(0,n.jsx)("th",{children:"Device"}),(0,n.jsx)("th",{children:"Days Left"}),(0,n.jsx)("th",{children:"Payment Date"}),(0,n.jsxs)("th",{children:["Pay For Month",(0,n.jsxs)(g.Z.Select,{className:i().select,"aria-label":"Default select example",defaultValue:"",onChange:e=>b(e.target.value),style:{width:"10.5rem"},children:[(0,n.jsx)("option",{value:"",children:"For Every Device"}),[1,2,3,6,12].map((e,t)=>(0,n.jsxs)("option",{value:e,children:[e," Month"]},t))]})]}),(0,n.jsx)("th",{children:"More"})]})}),(0,n.jsx)("tbody",{children:x?o.length>0?o.map((t,r)=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.Z,{props:[t,y,N,_,C,e]},r)})):(0,n.jsx)("h1",{className:"".concat(i().EmptyContainer),children:"Device List is Empty"}):null})]})})}),(0,n.jsxs)("div",{className:i().PurchaseButton,children:[(0,n.jsxs)("p",{className:i().TotalPrice,children:["Total Price: â‚¹",S!=E?(0,n.jsxs)("span",{style:{textDecoration:"line-through",color:"red",marginLeft:"0.5rem",fontSize:"1.9rem"},children:[S," "]}):null,(0,n.jsx)("span",{children:E})]}),(0,n.jsx)(u.Z,{onClick:V,variant:"warning",children:"Extend"})," "]})]})})]})}},5147:function(e,t,r){"use strict";var n=r(4184),a=r.n(n),s=r(7294),o=r(6792),i=r(5893);let c=s.forwardRef(({bsPrefix:e,className:t,striped:r,bordered:n,borderless:s,hover:c,size:l,variant:h,responsive:d,...u},g)=>{let m=(0,o.vE)(e,"table"),p=a()(t,m,h&&`${m}-${h}`,l&&`${m}-${l}`,r&&`${m}-${"string"==typeof r?`striped-${r}`:"striped"}`,n&&`${m}-bordered`,s&&`${m}-borderless`,c&&`${m}-hover`),f=(0,i.jsx)("table",{...u,className:p,ref:g});if(d){let v=`${m}-responsive`;return"string"==typeof d&&(v=`${v}-${d}`),(0,i.jsx)("div",{className:v,children:f})}return f});t.Z=c}},function(e){e.O(0,[4617,4492,5263,5715,6361,1760,9774,2888,179],function(){return e(e.s=6316)}),_N_E=e.O()}]);