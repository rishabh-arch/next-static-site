(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9936],{3162:function(e,t,a){var n,s;void 0!==(n="function"==typeof(s=function(){"use strict";function t(e,t,a){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){r(n.response,t,a)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(a){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a.g&&a.g.global===a.g?a.g:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,a,i){var r=o.URL||o.webkitURL,c=document.createElement("a");a=a||e.name||"download",c.download=a,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?s(c):n(c.href)?t(e,a,i):s(c,c.target="_blank")):(c.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(c.href)},4e4),setTimeout(function(){s(c)},0))}:"msSaveOrOpenBlob"in navigator?function(e,a,o){if(a=a||e.name||"download","string"!=typeof e){var i;navigator.msSaveOrOpenBlob((void 0===(i=o)?i={autoBom:!1}:"object"!=typeof i&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e),a)}else if(n(e))t(e,a,o);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){s(r)})}}:function(e,a,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return t(e,a,n);var r="application/octet-stream"===e.type,c=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&c||i)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},d.readAsDataURL(e)}else{var h=o.URL||o.webkitURL,u=h.createObjectURL(e);s?s.location=u:location.href=u,s=null,setTimeout(function(){h.revokeObjectURL(u)},4e4)}});o.saveAs=r.saveAs=r,e.exports=r})?s.apply(t,[]):s)&&(e.exports=n)},9568:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/Purchase",function(){return a(9)}])},1675:function(e,t){"use strict";let a="192.168.0.200:5000";t.Z={Add_New_Device:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(a,"/api/Signage/Add_New_Device?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return 200!==n.status?n.json().then(e=>e):n.json().then(e=>e)},Update_Media_Properties:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(a,"/api/Signage/Update_Media_Properties?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return 200!==n.status?n.json().then(e=>e):n.json().then(e=>e)},Delete_Device:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(a,"/api/Signage/Delete_Device?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return 200!==n.status?n.json().then(e=>e):n.json().then(e=>e)},Get_Video_list:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(a,"/api/Signage/Get_Video_list?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return 200!==n.status?n.json().then(e=>e):n.json().then(e=>e)},Fetch_Video_list:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(a,"/api/Signage/Fetch_Video_list?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return 200!==n.status?n.json().then(e=>e):n.json().then(e=>e)},Fetch_Image_list:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(a,"/api/Signage/Fetch_Image_list?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return 200!==n.status?n.json().then(e=>e):n.json().then(e=>e)},Get_Image_list:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(a,"/api/Signage/Get_Image_list?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await n.json();return s},Delete_From_Bucket:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(a,"/api/Signage/Delete_From_Bucket?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await n.json();return s},Verify_Device:async e=>{let t=await fetch("http://".concat(a,"/api/Signage/NativeTV/VerifyDevice"),{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),n=await t.json();return n},Purchased_Devices:async()=>{let e=localStorage.getItem("token"),t=await fetch("http://".concat(a,"/api/Signage/NativeTV/PurchasedDevices?secret_token=")+e,{method:"get"}),n=await t.json();return n},Invoices:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(a,"/api/Signage/NativeTV/fetchUserInvoices?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await n.json();return s}}},4307:function(e,t){"use strict";let a="192.168.0.200:5000";t.Z={createOrder:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(a,"/api/Signage/NativeTV/createOrder?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return 200!==n.status?n.json().then(e=>e):n.json().then(e=>e)},createOrderForOwnedDevices:async e=>{let t=localStorage.getItem("token"),n=await fetch("http://".concat(a,"/api/Signage/NativeTV/createOrderForOwnedDevices?secret_token=")+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return 200!==n.status?n.json().then(e=>e):n.json().then(e=>e)}}},7119:function(e,t,a){"use strict";a.d(t,{Y:function(){return s},e:function(){return o}});let n="192.168.0.200:5000",s=e=>{let{order:t,user:a,key:s}=e,o=localStorage.getItem("token"),i={key:s,amount:t.amount,currency:"INR",name:"Signage Verse",description:"Test Transaction",image:"https://rishabh-arch.github.io/website-assets/Signage/TV/icon.png",order_id:t.id,callback_url:"http://".concat(n,"/api/Signage/NativeTV/PaymentVerification?secret_token=")+o,prefill:{name:a.first_name,email:a.email,contact:a.contact},notes:{address:"Razorpay Corporate Office"},theme:{color:"#ffc107"}};new Razorpay(i).open()},o=e=>{let{order:t,user:a,key:s}=e,o=localStorage.getItem("token"),i={key:s,amount:t.amount,currency:"INR",name:"Signage Verse",description:"Test Transaction",image:"https://rishabh-arch.github.io/website-assets/Signage/TV/icon.png",order_id:t.id,callback_url:"http://".concat(n,"/api/Signage/NativeTV/PaymentVerificationForOwnedDevices?secret_token=")+o,prefill:{name:a.first_name,email:a.email,contact:a.contact},notes:{address:"Razorpay Corporate Office"},theme:{color:"#ffc107"}};new Razorpay(i).open()}},2787:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var n=a(5893);a(7294);var s=a(5249),o=a.n(s);function i(){return(0,n.jsx)("div",{className:o().Nav,children:(0,n.jsx)("div",{className:o().title,children:(0,n.jsxs)("h3",{children:["Welcome to ",(0,n.jsx)("span",{children:"Digital Signage"})]})})})}},9:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return B}});var n=a(5893),s=a(7294),o=a(2787),i=a(4307),r=a(5005),c=a(4492),l=a(550),d=a.n(l),h=a(7814),u=a(2920),p=a(1163),m=a(7119);function _(e){let{getPrice:t}=e,[a,o]=(0,s.useState)(0);(0,p.useRouter)();let[l,h]=(0,s.useState)(!1),[_,f]=(0,s.useState)({DeviceQuantity:"",DevicePeriod:""}),[g,v]=(0,s.useState)(!1),y=e=>{let{name:a,value:n}=e.target;f({..._,[a]:n}),"DevicePeriod"===a&&("3"===n?o(t.discount.three):"6"===n?o(t.discount.six):"12"===n?o(t.discount.twelve):o(0))},j=async e=>{e.preventDefault(),e.stopPropagation(),""===_.DeviceQuantity||""===_.DevicePeriod?u.Am.error("Please Fill all the Details",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}):(h(!0),i.Z.createOrder(_).then(e=>{e.msgError?(h(!1),u.Am.error(e.message.msgBody,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})):((0,m.Y)(e.data),console.log(e.data),h(!1),u.Am.success("payment of ₹".concat(e.data.order.amount/100),{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}))}).catch(e=>{h(!1),u.Am.error("SomeThing Went Wrong!",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})}))};return(0,n.jsx)("div",{className:d().faqs,children:(0,n.jsxs)("div",{className:d().payment,children:[(0,n.jsxs)("div",{className:"col-12",children:[(0,n.jsx)("div",{className:"d-flex mb-2 ".concat(d().paymentHeader),children:(0,n.jsxs)("p",{className:"h4 ",children:[(0,n.jsx)("img",{alt:"",width:30,height:30,src:"/icon.png"}),(0,n.jsx)("span",{className:"mx-2",children:"Signage Verse"})]})}),(0,n.jsxs)("div",{className:"px-4",children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,n.jsx)("p",{className:"textmuted",children:"Devices"}),(0,n.jsx)("p",{className:"fs-14 fw-bold",children:""==_.DeviceQuantity?"NiL":_.DeviceQuantity})]}),(0,n.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,n.jsx)("p",{className:"textmuted",children:"per Device"}),(0,n.jsxs)("p",{className:"fs-14 fw-bold",children:[(0,n.jsx)("span",{className:"fas fa-dollar-sign pe-1"}),"₹",t.current]})]}),(0,n.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,n.jsx)("p",{className:"textmuted",children:"Month"}),(0,n.jsx)("p",{className:"fs-14 fw-bold",children:""==_.DevicePeriod?"NiL":"".concat(_.DevicePeriod)})]}),(0,n.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,n.jsx)("p",{className:"textmuted fw-bold",children:"Total"}),(0,n.jsxs)("div",{className:"d-flex align-text-top ",children:[(0,n.jsx)("span",{className:"fas fa-dollar-sign mt-1 pe-1 fs-14 "}),(0,n.jsxs)("span",{className:"h4",children:[(0,n.jsxs)("span",{className:"text-decoration-line-through ".concat(0===a?"d-none":""),style:{fontSize:"1.3rem"},children:["₹",Math.round(_.DevicePeriod*_.DeviceQuantity*t.current)," "]}),"₹",Math.round(_.DevicePeriod*_.DeviceQuantity*t.current*(1-a))]})]})]})]})]}),(0,n.jsxs)("span",{className:"d-flex justify-content-center align-items-center ".concat(d().discount),children:["Offer : ",100*a,"%"]}),(0,n.jsx)(c.Z,{className:d().form,children:(0,n.jsxs)(c.Z.Group,{className:"d-flex flex-column ".concat(d().form_group),controlId:"formBasicEmail",children:[(0,n.jsxs)(c.Z.Select,{type:"number",className:"mt-3 mb-3",placeholder:"Devices",name:"DeviceQuantity",pattern:"^[A-Za-z0-9]*$",onChange:y,children:[(0,n.jsx)("option",{value:"",children:"Select Devices"}),Array.from({length:12}).map((e,t)=>(0,n.jsxs)("option",{value:t+1,children:[t+1," Device"]},t+1))]}),(0,n.jsxs)(c.Z.Select,{type:"text",className:"mt-3 mb-3",placeholder:"Select Month",name:"DevicePeriod",pattern:"^[A-Za-z0-9]*$",onChange:y,children:[(0,n.jsx)("option",{value:"",children:"Select Month"}),[1,2,3,6,12].map((e,t)=>(0,n.jsxs)("option",{value:e,children:[e," Month"]},t))]}),(0,n.jsx)(r.Z,{variant:"warning",className:"font-weight-bold m-2",type:"submit",onClick:j,disabled:l,children:"Pay"})]})})]})})}var f=a(1675),g=a(9803),v=a.n(g),y=a(9417),j=a(4184),x=a.n(j),b=a(6792),w=a(80);let N=s.forwardRef(({active:e,disabled:t,className:a,style:s,activeLabel:o,children:i,...r},c)=>{let l=e||t?"span":w.Z;return(0,n.jsx)("li",{ref:c,style:s,className:x()(a,"page-item",{active:e,disabled:t}),children:(0,n.jsxs)(l,{className:"page-link",...r,children:[i,e&&o&&(0,n.jsx)("span",{className:"visually-hidden",children:o})]})})});function S(e,t,a=e){let o=s.forwardRef(({children:e,...s},o)=>(0,n.jsxs)(N,{...s,ref:o,children:[(0,n.jsx)("span",{"aria-hidden":"true",children:e||t}),(0,n.jsx)("span",{className:"visually-hidden",children:a})]}));return o.displayName=e,o}N.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},N.displayName="PageItem";let P=S("First","\xab"),D=S("Prev","‹","Previous"),T=S("Ellipsis","…","More"),k=S("Next","›"),C=S("Last","\xbb"),O=s.forwardRef(({bsPrefix:e,className:t,size:a,...s},o)=>{let i=(0,b.vE)(e,"pagination");return(0,n.jsx)("ul",{ref:o,...s,className:x()(t,i,a&&`${i}-${a}`)})});O.displayName="Pagination";var R=Object.assign(O,{First:P,Prev:D,Ellipsis:T,Item:N,Next:k,Last:C}),E=a(8945),I=a(3162),A=a(5147);function Z(e){let{setGetPrice:t}=e;(0,p.useRouter)();let[a,o]=(0,s.useState)(!1),[i,c]=(0,s.useState)({DeviceQuantity:"",DevicePeriod:""}),[l,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)({}),[_,g]=(0,s.useState)(!1),[j,x]=(0,s.useState)(1),[b,w]=(0,s.useState)(1),[N,S]=(0,s.useState)(0);(0,s.useEffect)(()=>{console.log(j),f.Z.Invoices({page:j}).then(e=>{e.msgError?console.log("error"):(m(e.msg),w(e.count),t(e.price),g(!0))}).catch(e=>{console.log(e)})},[j]);let P=async()=>{let e=localStorage.getItem("token");await E.Z.get("http://".concat("192.168.0.200:5000","/api/Signage/NativeTV/downloadExcel?secret_token=")+e,{responseType:"arraybuffer",onDownloadProgress:e=>{S(parseInt(Math.round(100*e.loaded/e.total)))}}).then(e=>{let t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,I.saveAs)(t,"invoices.xlsx")}).then(()=>{S(0)}).catch(e=>{console.log(e)})},D=[];for(let T=1;T<=b/20;T++)D.push((0,n.jsx)(R.Item,{onClick:()=>x(T),style:{color:"white"},active:T===j,children:T},T));return(0,n.jsxs)("div",{className:v().faqs,children:[(0,n.jsx)("div",{children:(0,n.jsxs)(r.Z,{className:v().download_btn,onClick:P,variant:"success",children:[(0,n.jsx)(h.G,{icon:y.icc})," Download Excel File"]})}),(0,n.jsxs)(A.Z,{className:v().faqs_table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:v().Table_headRow,children:"#"}),(0,n.jsx)("th",{className:v().Table_headRow,children:"Order ID"}),(0,n.jsx)("th",{className:v().Table_headRow,children:"Devices"}),(0,n.jsx)("th",{className:v().Table_headRow,children:"Period"}),(0,n.jsx)("th",{className:v().Table_headRow,children:"Purchased On"}),(0,n.jsx)("th",{className:v().Table_headRow,children:"Ends On"}),(0,n.jsx)("th",{className:v().Table_headRow,children:"Amount"})]})}),(0,n.jsx)("tbody",{children:_?u.length>0?u.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:v().Table_bodyRow,children:t+1}),(0,n.jsx)("td",{className:v().Table_bodyRow,children:e.OrderId}),(0,n.jsx)("td",{className:v().Table_bodyRow,children:e.DeviceQuantity}),(0,n.jsx)("td",{className:v().Table_bodyRow,children:e.DevicePeriod}),(0,n.jsx)("td",{className:v().Table_bodyRow,children:e.startDate}),(0,n.jsx)("td",{className:v().Table_bodyRow,children:e.endDate}),(0,n.jsx)("td",{className:v().Table_bodyRow,children:e.Amount})]},t)):(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},children:(0,n.jsx)("h3",{className:"text-warning center",children:"No Transactions"})}):null})]}),(0,n.jsx)(R,{className:v().pagination,children:D})]})}var F=a(8862),M=a.n(F);a(1664);var V=a(3192),L=a(3755);function B(){let[e,t]=(0,s.useState)(0);return(0,n.jsxs)("main",{className:M().purchase_Container,children:[(0,n.jsx)(o.Z,{}),(0,n.jsx)("div",{className:M().grid,children:(0,n.jsxs)(L.Z,{defaultActiveKey:"Buy New",id:"fill-tab-example",className:M().tabs,fill:!0,children:[(0,n.jsx)(V.Z,{eventKey:"Buy New",title:"Buy New",className:M().tab__one,children:(0,n.jsx)("div",{className:M().row__one,children:(0,n.jsx)(_,{getPrice:e})})}),(0,n.jsx)(V.Z,{eventKey:"Transactions",title:"Transactions",className:M().tab__one,children:(0,n.jsx)("div",{className:M().row__one,children:(0,n.jsx)(Z,{setGetPrice:t})})})]})})]})}},5249:function(e){e.exports={Nav:"Navbar_Nav__U4jLv",title:"Navbar_title__vNChJ",search:"Navbar_search__q_Gca"}},8862:function(e){e.exports={purchase_Container:"Purchase_purchase_Container__Xy0sZ",grid:"Purchase_grid__LfKnS",tabs:"Purchase_tabs__10jfj",tab__one:"Purchase_tab__one__jAf_F",row__one:"Purchase_row__one__26EOE",row__two:"Purchase_row__two__3xP8j"}},550:function(e){e.exports={Device_container:"PurchaseContainer_Device_container__ryUZi",title:"PurchaseContainer_title__Ny0jP",faqs:"PurchaseContainer_faqs__A2sZu",payment:"PurchaseContainer_payment__xP8Mf",paymentHeader:"PurchaseContainer_paymentHeader___y9T4",form:"PurchaseContainer_form__Oii76",form_group:"PurchaseContainer_form_group__Q_EmN",icon:"PurchaseContainer_icon__Fb_x5",info:"PurchaseContainer_info__xf9ri",discount:"PurchaseContainer_discount__DmAcT"}},9803:function(e){e.exports={Device_container:"PurchasedDevicesContainer_Device_container__jt6Tp",title:"PurchasedDevicesContainer_title__cz2on",faqs:"PurchasedDevicesContainer_faqs__aWMwG",faqs_table:"PurchasedDevicesContainer_faqs_table__4YsUS",Table_headRow:"PurchasedDevicesContainer_Table_headRow__83QAM",payment:"PurchasedDevicesContainer_payment__o6rFZ",paymentHeader:"PurchasedDevicesContainer_paymentHeader__iKwuY",form:"PurchasedDevicesContainer_form__Nkdq8",form_group:"PurchasedDevicesContainer_form_group__WxQd2",icon:"PurchasedDevicesContainer_icon__bPMFi",info:"PurchasedDevicesContainer_info__QVbOo",pagination:"PurchasedDevicesContainer_pagination__T15AZ"}},5147:function(e,t,a){"use strict";var n=a(4184),s=a.n(n),o=a(7294),i=a(6792),r=a(5893);let c=o.forwardRef(({bsPrefix:e,className:t,striped:a,bordered:n,borderless:o,hover:c,size:l,variant:d,responsive:h,...u},p)=>{let m=(0,i.vE)(e,"table"),_=s()(t,m,d&&`${m}-${d}`,l&&`${m}-${l}`,a&&`${m}-${"string"==typeof a?`striped-${a}`:"striped"}`,n&&`${m}-bordered`,o&&`${m}-borderless`,c&&`${m}-hover`),f=(0,r.jsx)("table",{...u,className:_,ref:p});if(h){let g=`${m}-responsive`;return"string"==typeof h&&(g=`${g}-${h}`),(0,r.jsx)("div",{className:g,children:f})}return f});t.Z=c}},function(e){e.O(0,[4976,4492,5263,5715,8945,9659,9774,2888,179],function(){return e(e.s=9568)}),_N_E=e.O()}]);